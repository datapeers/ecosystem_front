<div class="head" [ngClass]="getHeadClass()">
    <div class="head-content">
        <div class="flex-none head-content-left flex-row">
            <i-tabler name="align-justified" class="head-menu-item-btn app-backgrounds menu-icon" *ngIf="showSidenavButton()" (click)="toggleMenu()"></i-tabler>
            <i-tabler @fadeInOut name="arrow-left" class="head-menu-item-btn app-backgrounds menu-icon" *ngIf="returnBtn$ | async" (click)="return()"></i-tabler>
            <div class="panel-info elipse-panel p-2 flex flex-row align-items-center justify-content-between gap-2 sm:gap-3" [style.background]="gradient()">
                <div class="completed elipse-panel p-2 min-h-full flex align-items-center justify-content-center" [style.background-color]="colorPhase">
                    <span class="font-semibold text-white progress-label">3/10</span>
                </div>
                <div class="hidden lg:flex flex-column labels" [style.color]="colorPhase">
                    <span class="font-bold text-base">ETAPA EARLY</span>
                    <div style="height: 3px;"></div>
                    <span class="text-sm">Fase 3</span>
                </div>
                <p-knob [(ngModel)]="percentCompleted" [strokeWidth]="10" [readonly]="true" [size]="58" [valueTemplate]="'75%'" [valueColor]="colorPhase" [rangeColor]="withOpacity(colorPhase, 0.2)">
                    <ng-template pTemplate="text">a</ng-template>
                </p-knob>
            </div>
        </div>
        <div class="flex-grow-1">
            <div class="hidden lg:flex w-full">
                <ng-container [ngTemplateOutlet]="searchBar">
                </ng-container>
            </div>
            <div class="icon-btn-top-nav search-mobile flex lg:hidden" (click)="viewSearchItem = true">
                <i-tabler name="search" class="app-backgrounds border-circle"></i-tabler>
            </div>
        </div>
        <div class="flex-none head-content-right flex align-items-center gap-2 ">
            <div class="head-menu gap-2 sm:gap-4 align-items-center justify-content-center">
                <div class="pt-2">
                    <div class="notify-btn icon-btn-top-nav" *ngIf="showSidenavButton()" (click)="viewNotificationBoard = true">
                        <i-tabler name="bell"></i-tabler>
                    </div>
                    <div class="circle-indicator pulse"></div>
                </div>
                <div class="panel-user elipse-panel flex flex-row align-items-center justify-content-between gap-2">
                    <div class="user-name-rol ">
                        <span class="cursor-default font-semibold text-base uppercase  overflow-hidden white-space-nowrap text-overflow-ellipsis" [pTooltip]="user.fullName" tooltipPosition="left">{{user.fullName}}</span>
                        <span class="cursor-default font-semibold set-color-appTwo text-sm  overflow-hidden white-space-nowrap text-overflow-ellipsis" [pTooltip]="user.fullName" tooltipPosition="left">{{rolName}}</span>
                    </div>
                    <ng-container *ngIf="!user?.profileImageUrl else imageTemplate">
                        <p-avatar [label]="user.nameInitial" shape="circle" class="avatar-app flex cursor-pointer" pTooltip="Opciones" tooltipPosition="left" size="large" (click)="viewUserBoard = true">
                        </p-avatar>
                    </ng-container>
                    <ng-template #imageTemplate>
                        <p-avatar [image]="user.profileImageUrl" shape="circle" class="avatar-app flex cursor-pointer" pTooltip="Opciones" tooltipPosition="left" size="large" (click)="viewUserBoard = true">
                        </p-avatar>
                    </ng-template>

                </div>
            </div>
        </div>
    </div>
</div>


<p-sidebar [(visible)]="viewUserBoard" position="right" styleClass="border-sidebar" appendTo="body" [modal]="false" [showCloseIcon]="true">
    <ng-template pTemplate="header"></ng-template>
    <ng-template pTemplate="content" styleClass="m-0 p-0">
        <div class="flex flex-column w-full h-full gap-2 align-items-center justify-content-between">
            <div class="w-full flex flex-column p-2 gap-2">
                <div class="w-full flex flex-row align-items-center justify-content-center gap-3">
                    <ng-container *ngIf="!user?.profileImageUrl else imageTemplate">
                        <p-avatar [label]="user.nameInitial" shape="circle" class="avatar-app big-avatar flex cursor-pointer " pTooltip="Opciones" tooltipPosition="left">
                        </p-avatar>
                    </ng-container>
                    <ng-template #imageTemplate>
                        <p-avatar [image]="user.profileImageUrl" shape="circle" class="avatar-app big-avatar flex cursor-pointer" pTooltip="Opciones" tooltipPosition="left">
                        </p-avatar>
                    </ng-template>
                    <div class="info-user flex flex-column gap-2">
                        <span class="font-semibold text-base uppercase  overflow-hidden white-space-nowrap text-overflow-ellipsis" [pTooltip]="user.fullName" tooltipPosition="left">{{user.fullName}}</span>
                        <span class="font-semibold set-color-appTwo text-sm  overflow-hidden white-space-nowrap text-overflow-ellipsis" [pTooltip]="user.fullName" tooltipPosition="left">{{rolName}}</span>
                    </div>
                </div>
                <p-button styleClass="option button-grey button-border-mid w-full align-items-center justify-content-between mt-2" (onClick)="profileSetting()">
                    <span class="mx-2 font-semibold	">Perfil startup</span>
                    <i-tabler class="sidenav-link-icon" name="rocket"></i-tabler>
                </p-button>
            </div>
            <div class="option normal-panel flex flex-column gap-2 p-5 m-2">
                <i-tabler class="set-color-appSeven" name="layout-board-split"></i-tabler>
                <span class="font-bold">'Decidir'</span>
                <span class="text-xs content-description">Contenido de Fase 3 - Etapa Early</span>
                <p-button styleClass="w-full button-yellow button-border-mid mt-3">
                    <span class="w-full text-center">Retomar ultimo contenido</span>
                </p-button>
            </div>
            <div class="option flex flex-column gap-2">
                <p-button styleClass="w-full button-yellow-second button-border-mid w-full align-items-center justify-content-between " (onClick)="logOut()">
                    <span class="mx-2 font-semibold	">Cerrar Sesión</span>
                    <i-tabler class="sidenav-link-icon" name="door-exit"></i-tabler>
                </p-button>
                <p-button styleClass="w-full button-grey button-border-mid w-full align-items-center justify-content-between " (onClick)="profileSetting()">
                    <span class="mx-2 font-semibold	">Configuración de cuenta</span>
                    <i-tabler class="sidenav-link-icon" name="settings"></i-tabler>
                </p-button>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="footer"></ng-template>
</p-sidebar>

<p-sidebar [(visible)]="viewNotificationBoard" position="right" styleClass="border-sidebar" appendTo="body" [modal]="false" [showCloseIcon]="true">
    <ng-template pTemplate="header">
        <div class="panel-info elipse-panel w-9 h-full notifications-header p-2 flex flex-row align-items-center justify-content-center gap-3">
            <i-tabler name="bell"></i-tabler>
            <span>NOTIFICACIONES</span>
        </div>
    </ng-template>
    <ng-template pTemplate="content" styleClass="m-0 p-0"><app-notifications></app-notifications></ng-template>
    <ng-template pTemplate="footer"></ng-template>
</p-sidebar>

<p-sidebar [(visible)]="viewSearchItem" position="top">
    <div class="w-full h-full flex flex-column align-content-center justify-content-center mt-2">
        <ng-container [ngTemplateOutlet]="searchBar">
        </ng-container>
    </div>
</p-sidebar>

<ng-template #searchBar>
    <div class="head-content-mid w-full">
        <span class="p-input-icon-right search">
            <i class="pi pi-search"></i>
            <input type="text" pInputText [(ngModel)]="searchValue" placeholder="¿Que deseas buscar?" />
        </span>
    </div>
</ng-template>